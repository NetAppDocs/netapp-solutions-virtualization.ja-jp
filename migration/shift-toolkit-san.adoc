---
sidebar: sidebar 
permalink: migration/shift-toolkit-san.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox, san, shift, toolkit 
summary: Shift Toolkit で変換する前に、VMware Storage vMotion と Hyper-V Storage Live Migration を使用して、SAN ベースのデータストアから NAS に VM を移行し、ビジネスの継続性を維持します。 
---
= Shift Toolkit を使用して SAN 環境から VM を移行して変換する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Shift Toolkit で変換する前に、VMware Storage vMotion と Storage Live Migration を使用して VM を SAN ベースのデータストアから NAS に移行し、ビジネスの継続性を維持します。



== SANベースのVMの要件

Shift Toolkit では、変換前に VM が NAS 環境 (VMware ESXi の場合は NFS) に存在している必要があります。現在、VM が iSCSI、ファイバー チャネル (FC)、ファイバー チャネル オーバー イーサネット (FCoE)、または NVMe オーバー ファイバー チャネル (NVMe/FC) を使用して SAN ベースのデータストアに保存されている場合は、まずそれらを NFS データストアに移行する必要があります。



== SAN環境の移行ワークフロー

次の図は、SAN 環境に保存されている VM の完全な移行ワークフローを示しています。

image::shift-toolkit-260.png[SAN から NAS へ、そして再び SAN へ VM を移動する移行ワークフロー図]

移行プロセスは主に 3 つのフェーズで構成されます。

.SAN から NAS (VMware 環境) への移行
VMware vSphere Storage vMotion を使用して、VM とそのディスクを SAN データストアから NFS データストアに移行します。この操作は、VM のダウンタイムなしで実行できます。

.Shift Toolkit を使用して VM を変換する
VM が NFS データストアに配置された後、Shift Toolkit はNetApp FlexCloneテクノロジーを使用して VM を VMware ESXi から任意のハイパーバイザーに変換します。変換された VM とそのディスクは、それぞれのハイパーバイザー ホストからアクセス可能な qtree に配置されます。

.SANへの移行
変換後、ストレージ移行を使用して、変換された VM とそのディスクを qtree から SAN 対応ボリュームに移動します。これにより、それぞれのハイパーバイザー環境で SAN インフラストラクチャを維持できます。



== プロセッサの互換性の問題の処理

異なるプロセッサ機能を持つノード間でライブ VM 移行を実行すると、プロセッサ互換性チェックのために移行が失敗する可能性があります。

この問題を解決するには:

. Hyper-V で「異なるプロセッサを搭載した物理コンピューターに移行する」オプションを有効にします。
. Shift Toolkit スクリプト ブロックで使用可能なプロセッサ互換性スクリプトを使用して、プロセッサ間の移行用に VM を構成します。


この設定により、互換性を維持しながら、異なるプロセッサ機能セットを持つホスト間で VM を移行できます。
