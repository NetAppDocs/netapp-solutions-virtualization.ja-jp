---
sidebar: sidebar 
permalink: vmware/vmw-vcf-design.html 
keywords: netapp, vmware, cloud, foundation, vcf, flexpod 
summary: VCF 9 を新規に開始することも、既存のデプロイメントを再利用して、VCF 9 とONTAPを使用したプライベート クラウド環境を作成することもできます。  VCF 9 の一般的な設計ブループリントと、 NetApp製品がどのように価値を高めるかについて学習します。 
---
= VMware Cloud Foundation とONTAP を使用した設計オプション
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
VCF 9 を新規に開始することも、既存のデプロイメントを再利用して、VCF 9 とONTAPを使用したプライベート クラウド環境を作成することもできます。  VCF 9 の一般的な設計ブループリントと、 NetApp製品がどのように価値を高めるかについて学習します。



== ストレージオプション

VMware Cloud Foundation with ONTAP は、さまざまなパフォーマンス、スケーラビリティ、可用性の要件を満たすために、さまざまなストレージ構成をサポートしています。次の表は、ご使用の環境で使用できる主なストレージ オプションと補足ストレージ オプションをまとめたものです。

[cols="4,2,2"]
|===
| 製品ファミリー | FC 上の VMFS | NFSv3 


| ASA AシリーズおよびCシリーズ | はい | いいえ 


| AFF AシリーズおよびCシリーズ | はい | はい 


| FAS | はい | はい 
|===
[cols="4,2,2,2,2,2"]
|===
| 製品ファミリー | FC 上の VMFS | iSCSI 上の VMFS | NVMe-oF 上の VMFS | NFSv3 | NFSv4.1 


| ASA AシリーズおよびCシリーズ | はい | はい | はい | いいえ | いいえ 


| AFF AシリーズおよびCシリーズ | はい | はい | はい | はい | はい 


| FAS | はい | はい | はい | はい | はい 
|===


== 設計図

次のブループリントは、さまざまなサイトおよびリソースのシナリオにおける VMware Cloud Foundation およびONTAPの一般的な展開モデルを示しています。



=== 最小限の設置面積で単一のサイトにVCF艦隊を配備

この設計ブループリントは、最小限のリソースで単一の vSphere クラスタに管理コンポーネントとワークロード コンポーネントを展開するためのものです。  VMFS および NFSv3 プリンシパル データストアと、2 ノード構成によるシンプルな導入オプションをサポートします。  All Apps 組織モデルで VCF Automation を使用する予定の場合は、vSphere Supervisor ノードと NSX Edge ノードを展開するための 2 番目のクラスタが必要です。

image::vmw-vcf-design-001.png[最小限の設置面積で単一のサイトにVCF艦隊を配備]

リソースの消費を最小限に抑えるには、可能な場合は既存のONTAPツール インスタンスを使用します。利用できない場合は、Small プロファイルの単一ノードが適しています。  SnapCenter Plug-in for VMware vSphereは、ネイティブ スナップショットと別のONTAPストレージ アレイへのレプリケーションを使用して、仮想マシンとデータストアを保護します。


NOTE: VCF を調査するためのリソースが不足している場合は、多くのクラウド プロバイダーが VCF をサービスとして提供しており、 ONTAP はクラウド プロバイダーのファーストパーティ サービスとして利用できます。

このデザインの詳細については、link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/design/blueprints/vcf-fleet-basic-management-design.html["最小限の設置面積で単一のサイトにVCFフリートに関するBroadcomの技術文書を集約"] 。



=== 単一サイトでのVCF艦隊

この設計ブループリントは、アプリケーションの高可用性に依存する単一のプライマリ データセンターを持つ顧客向けです。通常、単一の VCF 環境が含まれます。ブロック ワークロードにはASAを使用し、ファイル/統合ワークロードにはAFF を使用できます。

コンテンツ リポジトリは、VCF ドメイン間で VM テンプレートとコンテナ レジストリを共有します。  FlexGroupボリュームでホストされている場合、サブスクリプション データストアでFlexCache機能が利用できます。


CAUTION: FlexCacheデータストアでの VM のホスティングはサポートされていません。

image::vmw-vcf-design-002.png[単一サイトでのVCFフリート]

HA モードのONTAPツールの単一インスタンスで、VCF フリート内のすべての vCenter を管理できます。参照link:https://docs.netapp.com/us-en/ontap-tools-vmware-vsphere-10/deploy/prerequisites.html#configuration-limits-to-deploy-ontap-tools-for-vmware-vsphere["ONTAPツールの構成制限"]詳細については。  ONTAPツールは、VCF SSO および VCF OPS スマート グループ化と統合され、同じ UI で複数の vCenter にアクセスできます。

.ONTAPツールを使用した VCF 補足データストア
video::e7cf90b9-2744-404b-9831-b33f00164626[panopto]
VM およびデータストアの保護のために、各 vCenter インスタンスにSnapCenterプラグインを展開する必要があります。

ストレージ ポリシー ベースの管理は、vSphere Supervisor とともに使用され、VKS の制御 VM をホストします。タグは VCF Ops で集中管理されます。  NetApp Trident CSI は、ネイティブ アレイ機能を使用してアプリケーションのバックアップ保護を行うために VKS と併用されます。  vSphere CSI を使用すると、永続ボリュームの詳細が VCF Automation に表示されます。

このブループリントの詳細については、link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/design/blueprints/vcf-fleet-management-design-with-multiple-availability-zones.html["Broadcom の技術ドキュメントを単一サイトで VCF フリートに集約"] 。



=== 単一地域に複数の拠点を持つ VCF フリート

この設計は、ワークロードをさまざまな障害ドメインに分散することで、可用性の高いクラウドのようなサービスを提供する顧客向けです。

VMFS データストアの場合、 SnapMirrorアクティブ同期は、vSphere Metro Storage Cluster で使用するためのアクティブ/アクティブ ストレージ ユニットを提供します。均一アクセス モードでは透過的なストレージ フェイルオーバーが提供されますが、非均一アクセス モードでは障害ドメインの障害時に VM の再起動が必要になります。

NFS データストアの場合、vSphere Metro Storage Cluster を備えたONTAP MetroClusterにより高可用性が保証されます。メディエーターはスプリット ブレイン シナリオを回避し、 BlueXPでホストできるようになりました。

VM 配置ルールは、管理ドメイン コンポーネントの同じ障害ドメイン内の VM を制御します。

image::vmw-vcf-design-003.png[単一地域に複数の拠点を持つ VCF フリート]

ONTAPツールは、 SnapMirrorアクティブ同期関係を設定するための UI を提供します。両方の障害ドメインのストレージ システムは、 ONTAPツールおよびSnapCenter Plug-in for VMware vSphereに登録する必要があります。

SnapMirrorおよびSnapMirror to Cloud 経由でBlueXP Backup and Recovery for VMs を使用して、3-2-1 バックアップ ポリシーを実装できます。  3 つの場所のいずれからでも復元を実行できます。

Trident Protect またはBlueXP Backup and Recovery for Kubernetes は、VKS クラスター アプリケーションを保護します。

詳細については、link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/design/blueprints/vsphere-only-to-vcf-fleet-upgrade-blueprint.html["単一地域内の複数のサイトを持つ VCF フリートに関する Broadcom の技術ドキュメント"] 。



=== 複数の地域にまたがる複数の拠点を持つ VCF フリート

この設計は、世界中に広がる顧客を対象としており、近接したサービスと災害復旧ソリューションを提供します。

VMware Live Site Recovery またはBlueXP Disaster Recovery as a Service を使用して、VM の災害復旧を管理できます。  ONTAPツールは、 ONTAPでストレージ操作を調整するための SRA (ストレージ レプリケーション アダプタ) を提供します。

[cols="4,2,2"]
|===
| 製品ファミリー | SnapMirrorアクティブ同期 | MetroCluster 


| ASA AシリーズおよびCシリーズ | はい | はい 


| AFF AシリーズおよびCシリーズ | はい | はい 


| FAS | いいえ | はい 
|===
image::vmw-vcf-design-004.png[複数の地域にまたがる複数の拠点を持つ VCF フリート]

ONTAPツールは、データストアのレプリケーション設定用の UI を提供します。  BlueXP は、ストレージ アレイ間のレプリケーションにも使用できます。  SnapCenter Plug-in for VMware vSphereは、スナップショットに既存のSnapMirror関係を利用します。

詳細については、link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/design/blueprints/blueprint-4.html["複数の地域にまたがる複数の拠点を持つ VCF フリートに関する Broadcom の技術ドキュメント"] 。



=== 単一地域と追加地域に複数のサイトを持つ VCF フリート

この設計は、VM と VKS アプリケーションの可用性と災害復旧の両方に対応します。

ASA、 AFF、およびFAS はこの設計オプションをサポートしています。

image::vmw-vcf-design-005.png[単一地域と追加地域に複数のサイトを持つ VCF フリート]

レプリケーション関係を設定するには、 ONTAPツールまたはBlueXPを使用できます。

詳細については、 link:https://techdocs.broadcom.com/us/en/vmware-cis/vcf/vcf-9-0-and-later/9-0/design/blueprints/blueprint-5.html["単一地域および追加地域に複数のサイトを持つ VCF フリートに関する Broadcom の技術ドキュメント"] 。
